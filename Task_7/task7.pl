% Описываем динамические факты
:- dynamic верно/2, ложно/2.

% Главная цель
цель :- транспорт(Арг), !, write("Загаданное транспортное средство - "), writeln(Арг), очистить.
цель :- write("К сожалению, это транспортное средство мне не известно."), очистить.

% База правил для транспортных средств
транспорт("Автомобиль") :- это("наземное средство"),
                           свойство("Оно использует", "бензин"),
                           свойство("У него", "4 колеса").

транспорт("Мотоцикл") :- это("наземное средство"),
                         свойство("Оно использует", "бензин"),
                         свойство("У него", "2 колеса").

транспорт("Автобус") :- это("наземное средство"),
                        свойство("Оно использует", "дизель"),
                        свойство("У него", "большая пассажировместимость").

транспорт("Электромобиль") :- это("наземное средство"),
                              свойство("Оно использует", "электричество"),
                              свойство("У него", "4 колеса").

транспорт("Велосипед") :- это("наземное средство"),
                          свойство("Оно использует", "человеческую силу"),
                          свойство("У него", "2 колеса").

транспорт("Поезд") :- это("наземное средство"),
                      свойство("Оно использует", "электричество"),
                      свойство("Оно передвигается", "по рельсам").

транспорт("Самолет") :- это("воздушное средство"),
                        свойство("Оно использует", "авиационное топливо"),
                        свойство("Оно", "летает").

транспорт("Вертолет") :- это("воздушное средство"),
                         свойство("Оно использует", "авиационное топливо"),
                         свойство("Оно", "имеет лопасти").

транспорт("Лодка") :- это("водное средство"),
                      свойство("Оно использует", "весла"),
                      свойство("Оно", "передвигается по воде").

транспорт("Паром") :- это("водное средство"),
                      свойство("Оно использует", "дизель"),
                      свойство("Оно", "перевозит пассажиров").

транспорт("Катер") :- это("водное средство"),
                      свойство("Оно использует", "бензин"),
                      свойство("Оно", "быстро передвигается по воде").

транспорт("Яхта") :- это("водное средство"),
                      свойство("Оно использует", "ветер"),
                      свойство("Оно", "имеет парус").

транспорт("Электросамокат") :- это("наземное средство"),
                               свойство("Оно использует", "электричество"),
                               свойство("У него", "2 колеса").

транспорт("Трамвай") :- это("наземное средство"),
                        свойство("Оно использует", "электричество"),
                        свойство("Оно", "передвигается по рельсам").

транспорт("Троллейбус") :- это("наземное средство"),
                           свойство("Оно использует", "электричество"),
                           свойство("Оно", "имеет контактные провода").

транспорт("Грузовик") :- это("наземное средство"),
                         свойство("Оно использует", "дизель"),
                         свойство("У него", "4 или более колес").

транспорт("Скутер") :- это("наземное средство"),
                       свойство("Оно использует", "бензин"),
                       свойство("У него", "2 колеса").

транспорт("Квадроцикл") :- это("наземное средство"),
                           свойство("Оно использует", "бензин"),
                           свойство("У него", "4 колеса").

транспорт("Гидроцикл") :- это("водное средство"),
                          свойство("Оно использует", "бензин"),
                          свойство("Оно", "быстро передвигается по воде").

транспорт("Воздушный шар") :- это("воздушное средство"),
                              свойство("Оно использует", "горячий воздух"),
                              свойство("Оно", "летает").

% Правила для общих характеристик
это("наземное средство") :- свойство("Оно передвигается", "по земле").
это("воздушное средство") :- свойство("Оно", "летает").
это("водное средство") :- свойство("Оно", "передвигается по воде").

% Правила для свойств
свойство(Арг, Арг2) :- верно(Арг, Арг2), !.
свойство(Арг, Арг2) :- not(ложно(Арг, Арг2)), узнать(Арг, Арг2, Ответ), Ответ = да.

нет_свойства(Арг, Арг2) :- ложно(Арг, Арг2), !.
нет_свойства(Арг, Арг2) :- not(верно(Арг, Арг2)), узнать(Арг, Арг2, Ответ), Ответ = нет.

% Запросы к пользователю
узнать(Арг, Арг2, Ответ) :- write(Арг), write(" "), write(Арг2), read(Ответ), запомнить(Арг, Арг2, Ответ).
запомнить(Арг, Арг2, да) :- assert(верно(Арг, Арг2)).
запомнить(Арг, Арг2, нет) :- assert(ложно(Арг, Арг2)).

% Очистка базы данных
очистить :- retract(верно(_, _)), fail.
очистить :- retract(ложно(_, _)), fail.
очистить.
